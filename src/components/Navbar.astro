---
// Navbar.astro (ADNIGHT Segmented Style)
---

<!-- OVERLAY FULL SCREEN NEON -->
<div id="nav-overlay" class="nav-overlay">
  <!-- Close Button -->
  <button id="menu-close" class="overlay-close-btn" aria-label="Close Menu">
    <svg
      width="32"
      height="32"
      viewBox="0 0 24 24"
      fill="none"
      stroke="black"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      ><line x1="18" y1="6" x2="6" y2="18"></line><line
        x1="6"
        y1="6"
        x2="18"
        y2="18"></line></svg
    >
  </button>

  <div class="overlay-content">
    <!-- MAIN LINKS (Left) -->
    <div class="overlay-main-links">
      <a href="/nosotros" class="overlay-link">NOSOTROS</a>
      <a href="/casas-a-medida" class="overlay-link">MODELOS</a>
      <a href="/proyectos" class="overlay-link">PROYECTOS</a>
      <a href="/sostenibilidad" class="overlay-link">SOSTENIBILIDAD</a>
      <a href="/contacto" class="overlay-link active">CONTACTO</a>
    </div>

    <!-- SECONDARY INFO (Right) -->
    <div class="overlay-secondary-info">
      <div class="info-block">
        <h3>INFO & FAQ</h3>
        <h3>OFICINA CENTRAL</h3>
      </div>

      <div class="info-footer">
        <div class="footer-badge">
          <span>TAYGA 2026</span>
        </div>
        <a href="#" class="btn-download-app">VER CATÁLOGO</a>
      </div>
    </div>
  </div>
</div>

<nav class="navbar-segmented-top">
  <!-- SEGMENTO 1: MENU ICON -->
  <button id="menu-toggle" class="nav-segment icon-segment" aria-label="Menu">
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      ><line x1="3" y1="12" x2="21" y2="12"></line><line
        x1="3"
        y1="6"
        x2="21"
        y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg
    >
  </button>

  <!-- SEGMENTO 2: LOGO -->
  <a href="/" class="nav-segment logo-segment">
    <span class="logo-text">TAYGA</span>
    <span class="logo-badge">PRO</span>
  </a>

  <!-- SEGMENTO 3: ENLACES -->
  <div class="nav-segment links-segment">
    <a href="/" class="nav-link active">Home</a>
    <a href="/casas-a-medida" class="nav-link">Modelos</a>
    <a href="/obras-reales" class="nav-link">Proyectos</a>
    <a href="/contacto" class="nav-link">Contacto</a>
  </div>

  <!-- SEGMENTO 4: INFO (Floating Text) -->
  <div class="nav-info-text">
    <span class="info-phone">+34 848 88 80 00</span>
    <span class="info-hours">L-V · 08:00–17:00</span>
  </div>

  <!-- SEGMENTO 5: ICONS (Heart + Search) -->
  <div class="nav-segment icons-segment">
    <a href="/favoritos" class="icon-link" aria-label="Favoritos">
      <svg
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
        ></path>
      </svg>
    </a>
    <button class="icon-link search-btn" aria-label="Buscar">
      <svg
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </button>
  </div>

  <!-- SEGMENTO 6: CTA -->
  <a href="/solicitar-info" class="nav-segment cta-segment">
    <span>Solicitar info</span>
  </a>
</nav>

<script>
  const menuToggle = document.getElementById("menu-toggle");
  const menuClose = document.getElementById("menu-close");
  const navOverlay = document.getElementById("nav-overlay");

  function toggleMenu() {
    navOverlay?.classList.toggle("active");
    if (navOverlay) {
      document.body.style.overflow = navOverlay.classList.contains("active")
        ? "hidden"
        : "";
    }
  }

  menuToggle?.addEventListener("click", toggleMenu);
  menuClose?.addEventListener("click", toggleMenu);

  // Active link highlighters for the pill nav
  const currentPath = window.location.pathname;
  const links = document.querySelectorAll(".nav-link");
  links.forEach((link) => {
    // @ts-ignore
    if (link.getAttribute("href") === currentPath) {
      link.classList.add("active");
    }
  });
</script>
